# HubDigest 运维指南

面向 GitHub 新手的快速上手指南，帮助你修改配置、排查问题、维护项目。

---

## 一、项目在做什么？

- **每天自动**从 GitHub 抓取热门项目
- **AI 生成**中文摘要（项目名、一句话、技术栈、为什么火）
- **网页展示**在 https://hub-digest.vercel.app（或你的 Vercel 域名）

---

## 二、常用修改

### 2.1 修改触发时间（每天几点自动跑）

**文件**：`.github/workflows/daily-trending.yml`

找到第 6 行附近的 `cron`：

```yaml
- cron: "0 0 * * *"
```

Cron 格式：`分 时 日 月 周`，**注意是 UTC 时间**，北京时间 = UTC + 8。

| 想要的时间（北京时间） | 改成 |
|------------------------|------|
| 早上 8 点 | `0 0 * * *`（默认） |
| 中午 12 点 | `0 4 * * *` |
| 傍晚 6 点 | `0 10 * * *` |
| 晚上 10 点 | `0 14 * * *` |

### 2.2 修改每个榜展示的项目条数

**文件**：`config.yaml`

找到并修改：

```yaml
project_count: 20   # 改成 10、20、30 等
```

条数越少，LLM 调用越少，执行越快、成本越低。

### 2.3 修改 LLM 并发数（加速摘要）

**文件**：`config.yaml`

```yaml
llm_concurrency: 50   # 同时处理 50 个项目，可改为 10–50
use_thinking_model: true   # 使用思考模型推导应用场景，可改为 false 关闭
```

### 2.4 修改展示的语言

**文件**：`config.yaml`

找到 `languages` 部分：

```yaml
languages:
  - all
  - python
  - javascript
  - typescript
  - java
  - go
  - rust
```

可以删掉不需要的，或按 GitHub Trending 支持的语言添加（如 `c`、`ruby` 等）。

---

## 三、如何提交修改

### 方法 A：在 GitHub 网页上改（推荐新手）

1. 打开仓库：`https://github.com/你的用户名/HubDigest`
2. 进入要改的文件（如 `config.yaml`）
3. 点击右上角 **铅笔图标（Edit）**
4. 改完后往下滚动，点 **Commit changes**
5. 点 **Commit changes** 确认

### 方法 B：本地用 Git 提交

```bash
cd HubDigest
# 修改 config.yaml 或 workflow 文件后
git add .
git commit -m "修改触发时间/条数"
git push
```

---

## 四、手动触发一次更新

有时想立刻刷新数据，不用等到定时：

1. 打开：`https://github.com/你的用户名/HubDigest/actions`
2. 左侧点 **Daily Trending**
3. 右侧点 **Run workflow** → 再点一次 **Run workflow**
4. 等待约 15–20 分钟（抓取 + LLM 摘要）

---

## 五、常见问题

### Q1：网页显示「暂无数据」

**原因**：Trending 抓取或 LLM 摘要失败。

**排查**：
1. 打开 [Actions](https://github.com/redamancy36/HubDigest/actions)
2. 点最近一次运行，看哪一步失败（红叉）
3. 点进去看具体报错

**常见情况**：
- **Fetch trending 失败**：社区 API 不稳定，等一会儿再手动触发一次
- **Summarize with LLM 失败**：检查是否在 Settings → Secrets 里配置了 `DEEPSEEK_API_KEY`

### Q2：Push 失败（rejected, fetch first）

**原因**：你本地/网页改了代码，和 Actions 提交的数据冲突。

**处理**：一般已在 workflow 中加入 `git pull --rebase`。若仍报错，可：
1. 在 GitHub 网页上打开最新一次失败的 commit
2. 确认是否有冲突文件，必要时手动合并或重跑

### Q3：如何看 API Key 是否配置正确？

1. 仓库 → **Settings** → **Secrets and variables** → **Actions**
2. 确认有 `DEEPSEEK_API_KEY`（必填）
3. 可选：`QWEN_API_KEY`、`KIMI_API_KEY` 作为备用

### Q4：Vercel 打不开或很慢？

1. 登录 [Vercel](https://vercel.com) 查看部署状态
2. 若国内访问慢，可考虑迁移到 Cloudflare Pages

---

## 六、目录结构速查

```
HubDigest/
├── config.yaml              # 条数、语言、LLM 等配置
├── .github/workflows/
│   └── daily-trending.yml   # 定时任务、触发时间
├── scripts/                 # 脚本，一般不用改
├── src/
│   ├── index.html
│   ├── style.css
│   ├── app.js
│   └── data/                # 生成的 JSON 数据
└── doc/
    └── 运维指南.md          # 本文档
```

---

## 七、需要帮助？

- 查看 [README.md](../README.md) 了解技术细节
- GitHub Issues：在仓库里提 Issue 描述问题
